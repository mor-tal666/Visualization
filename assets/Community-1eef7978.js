import{_ as Y,a0 as Z,a1 as $,a2 as ee,a3 as J,a4 as te,a5 as ne,D as ae,R as se,B as oe,a6 as le,a7 as ce,r as I,f as o,g as d,j as _,l as t,m as n,W as f,V as ie,k as s,F as v,s as C,t as k,I as P,J as de,v as r,L as u,$ as D,a8 as re}from"./index-c0be0273.js";import{N as _e}from"./NavHeader-8f24c79d.js";const me={name:"Community",components:{NavHeader:_e,Picture:Z,Star:$,ChatDotRound:ee,Share:J,More:te,Refresh:ne,Calendar:ae,Location:se,User:oe,Message:le,View:ce,ShareIcon:J},setup(){const L=I("张三"),c=I(!1),h=I({content:"",images:[]}),l=[{title:"总用户数",value:"1,234",icon:"User",iconClass:"text-primary"},{title:"动态数",value:"5,678",icon:"Message",iconClass:"text-success"},{title:"活动数",value:"89",icon:"Calendar",iconClass:"text-warning"},{title:"互动数",value:"12,345",icon:"View",iconClass:"text-danger"}],w=I([{id:1,username:"张三",avatar:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png",content:"今天参加了关爱留守儿童的活动，收获很多！",time:"10分钟前",likes:12,isLiked:!1,images:["https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg"],comments:[{id:1,username:"李四",avatar:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png",content:"真棒！",time:"5分钟前"}],showComments:!1,newComment:""}]),M=I([{id:1,title:"周末读书会",description:"为留守儿童举办读书分享活动",date:"2024-03-20",location:"社区活动中心",capacity:20,registered:15,participants:[{avatar:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"},{avatar:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"},{avatar:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"},{avatar:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}]}]);return{currentUser:L,posting:c,newPost:h,statistics:l,posts:w,activities:M,handleImageChange:a=>{h.value.images.push(URL.createObjectURL(a.raw))},handlePost:async()=>{if(!h.value.content.trim()){f.warning("请输入内容");return}c.value=!0;try{await new Promise(a=>setTimeout(a,1e3)),w.value.unshift({id:Date.now(),username:L.value,avatar:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png",content:h.value.content,time:"刚刚",likes:0,isLiked:!1,images:[...h.value.images],comments:[],showComments:!1,newComment:""}),h.value={content:"",images:[]},f.success("发布成功")}finally{c.value=!1}},handleLike:a=>{a.isLiked=!a.isLiked,a.likes+=a.isLiked?1:-1},handleComment:a=>{a.showComments=!a.showComments},handleShare:a=>{f.success("分享功能开发中")},handleEditPost:a=>{f.success("编辑功能开发中")},handleDeletePost:a=>{ie.confirm("确定要删除这条动态吗？","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const g=w.value.findIndex(U=>U.id===a.id);g!==-1&&(w.value.splice(g,1),f.success("删除成功"))}).catch(()=>{})},submitComment:a=>{if(!a.newComment.trim()){f.warning("请输入评论内容");return}a.comments.push({id:Date.now(),username:L.value,avatar:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png",content:a.newComment,time:"刚刚"}),a.newComment=""},handleRefreshActivities:()=>{f.success("活动列表已更新")},handleJoinActivity:a=>{if(a.registered>=a.capacity){f.warning("活动已满员");return}a.registered++,a.participants.push({avatar:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}),f.success("报名成功")},format:a=>`${a}%`,getProgressStatus:a=>{const g=a.registered/a.capacity*100;return g>=100?"exception":g>=80?"warning":"success"}}}},ue={class:"community animate__animated animate__fadeIn"},pe={class:"stat-content"},fe={class:"stat-info"},he={class:"stat-value"},ge={class:"stat-title"},ve={class:"post-editor"},Ce={class:"post-actions"},ke={class:"post-list"},we={class:"post-header"},be={class:"user-info"},ye={class:"user-details"},xe={class:"username"},Ie={class:"post-time"},Pe={class:"post-content"},Le={key:0,class:"post-images"},Se={class:"post-actions"},Ve={key:1,class:"comments-section"},De={class:"comment-content"},Re={class:"comment-header"},Ue={class:"comment-username"},Be={class:"comment-time"},Me={class:"comment-text"},Ae={class:"comment-input"},Ee={class:"card-header"},Ne={class:"activity-list"},ze={class:"activity-info"},je={class:"activity-meta"},Je={class:"activity-participants"},Te={key:0,class:"participant-count"};function Ke(L,c,h,l,w,M){const A=o("nav-header"),E=o("el-header"),b=o("el-col"),S=o("el-row"),m=o("el-icon"),y=o("el-card"),R=o("el-input"),N=o("Picture"),z=o("el-upload"),p=o("el-button"),V=o("el-avatar"),j=o("More"),a=o("el-dropdown-item"),g=o("el-dropdown-menu"),U=o("el-dropdown"),T=o("el-image"),K=o("Star"),F=o("ChatDotRound"),H=o("Share"),O=o("Refresh"),W=o("Calendar"),q=o("Location"),G=o("el-progress"),Q=o("el-main"),X=o("el-container");return d(),_("div",ue,[t(X,null,{default:n(()=>[t(E,null,{default:n(()=>[t(A)]),_:1}),t(Q,null,{default:n(()=>[t(S,{gutter:20},{default:n(()=>[t(b,{span:24},{default:n(()=>c[1]||(c[1]=[s("h2",{class:"page-title animate__animated animate__fadeInDown"},"社区互动",-1)])),_:1,__:[1]})]),_:1}),t(S,{gutter:20,class:"mt-4"},{default:n(()=>[(d(!0),_(v,null,C(l.statistics,(e,x)=>(d(),k(b,{span:6,key:e.title},{default:n(()=>[t(y,{class:P(["stat-card animate__animated animate__fadeInUp",`animate__delay-${x+1}s`]),"body-style":{padding:"20px"}},{default:n(()=>[s("div",pe,[t(m,{size:40,class:P(e.iconClass)},{default:n(()=>[(d(),k(de(e.icon)))]),_:2},1032,["class"]),s("div",fe,[s("div",he,r(e.value),1),s("div",ge,r(e.title),1)])])]),_:2},1032,["class"])]),_:2},1024))),128))]),_:1}),t(S,{gutter:20,class:"mt-4"},{default:n(()=>[t(b,{span:16},{default:n(()=>[t(y,{class:"post-card animate__animated animate__fadeIn"},{default:n(()=>[s("div",ve,[t(R,{modelValue:l.newPost.content,"onUpdate:modelValue":c[0]||(c[0]=e=>l.newPost.content=e),type:"textarea",rows:3,placeholder:"分享你的想法...",class:"post-input animate__animated animate__fadeIn"},null,8,["modelValue"]),s("div",Ce,[t(z,{action:"#","list-type":"picture-card","auto-upload":!1,"on-change":l.handleImageChange,limit:9,class:"post-upload animate__animated animate__fadeIn"},{default:n(()=>[t(m,null,{default:n(()=>[t(N)]),_:1})]),_:1},8,["on-change"]),t(p,{type:"primary",onClick:l.handlePost,loading:l.posting,class:"post-btn animate__animated animate__fadeIn"},{default:n(()=>c[2]||(c[2]=[u(" 发布 ")])),_:1,__:[2]},8,["onClick","loading"])])])]),_:1}),s("div",ke,[(d(!0),_(v,null,C(l.posts,(e,x)=>(d(),k(y,{key:e.id,class:P(["post-item animate__animated animate__fadeIn",`animate__delay-${x+1}s`])},{default:n(()=>[s("div",we,[s("div",be,[t(V,{size:40,src:e.avatar},null,8,["src"]),s("div",ye,[s("div",xe,r(e.username),1),s("div",Ie,r(e.time),1)])]),e.username===l.currentUser?(d(),k(U,{key:0},{dropdown:n(()=>[t(g,null,{default:n(()=>[t(a,{onClick:i=>l.handleEditPost(e)},{default:n(()=>c[3]||(c[3]=[u("编辑")])),_:2,__:[3]},1032,["onClick"]),t(a,{onClick:i=>l.handleDeletePost(e),class:"text-danger"},{default:n(()=>c[4]||(c[4]=[u("删除")])),_:2,__:[4]},1032,["onClick"])]),_:2},1024)]),default:n(()=>[t(p,{type:"text"},{default:n(()=>[t(m,null,{default:n(()=>[t(j)]),_:1})]),_:1})]),_:2},1024)):D("",!0)]),s("div",Pe,r(e.content),1),e.images&&e.images.length?(d(),_("div",Le,[(d(!0),_(v,null,C(e.images,(i,B)=>(d(),k(T,{key:B,src:i,"preview-src-list":e.images,fit:"cover",class:"post-image animate__animated animate__fadeIn"},null,8,["src","preview-src-list"]))),128))])):D("",!0),s("div",Se,[t(p,{type:"text",class:P({"is-liked":e.isLiked}),onClick:i=>l.handleLike(e)},{default:n(()=>[t(m,null,{default:n(()=>[t(K)]),_:1}),u(" "+r(e.likes),1)]),_:2},1032,["class","onClick"]),t(p,{type:"text",onClick:i=>l.handleComment(e)},{default:n(()=>[t(m,null,{default:n(()=>[t(F)]),_:1}),u(" "+r(e.comments.length),1)]),_:2},1032,["onClick"]),t(p,{type:"text",onClick:i=>l.handleShare(e)},{default:n(()=>[t(m,null,{default:n(()=>[t(H)]),_:1}),c[5]||(c[5]=u(" 分享 "))]),_:2,__:[5]},1032,["onClick"])]),e.showComments?(d(),_("div",Ve,[(d(!0),_(v,null,C(e.comments,i=>(d(),_("div",{key:i.id,class:"comment-item animate__animated animate__fadeIn"},[t(V,{size:32,src:i.avatar},null,8,["src"]),s("div",De,[s("div",Re,[s("span",Ue,r(i.username),1),s("span",Be,r(i.time),1)]),s("div",Me,r(i.content),1)])]))),128)),s("div",Ae,[t(R,{modelValue:e.newComment,"onUpdate:modelValue":i=>e.newComment=i,placeholder:"写下你的评论...",onKeyup:re(i=>l.submitComment(e),["enter"])},{append:n(()=>[t(p,{onClick:i=>l.submitComment(e)},{default:n(()=>c[6]||(c[6]=[u("发送")])),_:2,__:[6]},1032,["onClick"])]),_:2},1032,["modelValue","onUpdate:modelValue","onKeyup"])])])):D("",!0)]),_:2},1032,["class"]))),128))])]),_:1}),t(b,{span:8},{default:n(()=>[t(y,{class:"activity-card animate__animated animate__fadeIn"},{header:n(()=>[s("div",Ee,[c[7]||(c[7]=s("span",null,"近期活动",-1)),t(p,{type:"text",onClick:l.handleRefreshActivities},{default:n(()=>[t(m,null,{default:n(()=>[t(O)]),_:1})]),_:1},8,["onClick"])])]),default:n(()=>[s("div",Ne,[(d(!0),_(v,null,C(l.activities,(e,x)=>(d(),_("div",{key:e.id,class:P(["activity-item animate__animated animate__fadeIn",`animate__delay-${x+1}s`])},[s("div",ze,[s("h4",null,r(e.title),1),s("p",null,r(e.description),1),s("div",je,[s("span",null,[t(m,null,{default:n(()=>[t(W)]),_:1}),u(" "+r(e.date),1)]),s("span",null,[t(m,null,{default:n(()=>[t(q)]),_:1}),u(" "+r(e.location),1)])]),t(G,{percentage:e.registered/e.capacity*100,format:l.format,status:l.getProgressStatus(e)},null,8,["percentage","format","status"]),s("div",Je,[(d(!0),_(v,null,C(e.participants,(i,B)=>(d(),k(V,{key:B,size:32,src:i.avatar},null,8,["src"]))),128)),e.participants.length>3?(d(),_("span",Te," +"+r(e.participants.length-3),1)):D("",!0)])]),t(p,{type:"primary",disabled:e.registered>=e.capacity,onClick:i=>l.handleJoinActivity(e)},{default:n(()=>[u(r(e.registered>=e.capacity?"已满员":"参加"),1)]),_:2},1032,["disabled","onClick"])],2))),128))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}const Oe=Y(me,[["render",Ke],["__scopeId","data-v-bdc60453"]]);export{Oe as default};
