import{_ as X,M as K,N as Y,O as Z,P as $,Q as ee,R as ae,y as te,S as le,C as ne,T as oe,r as _,c as se,f as o,U as re,g as c,j as x,l as e,m as t,V as ie,W as E,k as u,F as S,s as F,t as v,I as A,J as ue,v as y,L as f,X as de}from"./index-c0be0273.js";import{N as ce}from"./NavHeader-8f24c79d.js";const _e={name:"ResourceManagement",components:{NavHeader:ce,Plus:K,Search:Y,Edit:Z,Delete:$,Goods:ee,Location:ae,Box:te,Present:le,School:ne,House:oe},setup(){const P=_(!1),n=_(!1),b=_("add"),l=_(""),T=_(""),k=_(null),B=[{title:"总资源数",value:"180",icon:"Box",iconClass:"text-primary"},{title:"教育物资",value:"100",icon:"School",iconClass:"text-success"},{title:"生活物资",value:"50",icon:"House",iconClass:"text-warning"},{title:"娱乐物资",value:"30",icon:"Present",iconClass:"text-danger"}],I=[{label:"教育物资",value:"教育物资"},{label:"生活物资",value:"生活物资"},{label:"娱乐物资",value:"娱乐物资"}],h=[{label:"仓库A",value:"仓库A"},{label:"仓库B",value:"仓库B"},{label:"仓库C",value:"仓库C"}],d=_([{name:"学习用品",type:"教育物资",quantity:100,location:"仓库A",status:"可用"},{name:"衣物",type:"生活物资",quantity:50,location:"仓库B",status:"可用"},{name:"玩具",type:"娱乐物资",quantity:30,location:"仓库C",status:"可用"}]),i=_({name:"",type:"",quantity:0,location:"",status:"可用"}),q={name:[{required:!0,message:"请输入资源名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择资源类型",trigger:"change"}],quantity:[{required:!0,message:"请输入数量",trigger:"blur"}],location:[{required:!0,message:"请选择存放位置",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},D=se(()=>{let s=d.value;return l.value&&(s=s.filter(r=>r.name.toLowerCase().includes(l.value.toLowerCase())||r.type.toLowerCase().includes(l.value.toLowerCase())||r.location.toLowerCase().includes(l.value.toLowerCase()))),T.value&&(s=s.filter(r=>r.type===T.value)),s});return{loading:P,dialogVisible:n,dialogType:b,searchQuery:l,filterType:T,formRef:k,statistics:B,resourceTypes:I,locations:h,resources:d,resourceForm:i,rules:q,filteredResources:D,getTypeTagType:s=>({教育物资:"success",生活物资:"warning",娱乐物资:"danger"})[s]||"info",getStatusTagType:s=>({可用:"success",维护中:"warning",已用完:"danger"})[s]||"info",getQuantityPercentage:s=>Math.min(s/100*100,100),getQuantityStatus:s=>s<=10?"exception":s<=30?"warning":"success",handleAdd:()=>{b.value="add",i.value={name:"",type:"",quantity:0,location:"",status:"可用"},n.value=!0},handleEdit:s=>{b.value="edit",i.value={...s},n.value=!0},handleDelete:s=>{ie.confirm(`确定要删除资源"${s.name}"吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const r=d.value.findIndex(V=>V.name===s.name);r!==-1&&(d.value.splice(r,1),E.success("删除成功"))}).catch(()=>{})},handleSubmit:async()=>{k.value&&await k.value.validate(s=>{if(s){if(b.value==="add")d.value.push({...i.value}),E.success("添加成功");else{const r=d.value.findIndex(V=>V.name===i.value.name);r!==-1&&(d.value[r]={...i.value},E.success("更新成功"))}n.value=!1}})}}}},me={class:"resource-management animate__animated animate__fadeIn"},pe={class:"stat-content"},fe={class:"stat-info"},ge={class:"stat-value"},ve={class:"stat-title"},ye={class:"card-header"},be={class:"header-left"},he={class:"header-right"},we={class:"resource-name"},Ve={class:"location-info"},Ce={class:"dialog-footer"};function xe(P,n,b,l,T,k){const B=o("nav-header"),I=o("el-header"),h=o("el-col"),d=o("el-row"),i=o("el-icon"),q=o("el-card"),D=o("Search"),L=o("el-input"),m=o("el-option"),w=o("el-select"),R=o("Plus"),g=o("el-button"),M=o("Goods"),p=o("el-table-column"),Q=o("el-tag"),s=o("el-progress"),r=o("Location"),V=o("Edit"),N=o("Delete"),z=o("el-table"),G=o("el-main"),H=o("el-container"),C=o("el-form-item"),j=o("el-input-number"),J=o("el-form"),O=o("el-dialog"),W=re("loading");return c(),x("div",me,[e(H,null,{default:t(()=>[e(I,null,{default:t(()=>[e(B)]),_:1}),e(G,null,{default:t(()=>[e(d,{gutter:20},{default:t(()=>[e(h,{span:24},{default:t(()=>n[9]||(n[9]=[u("h2",{class:"page-title animate__animated animate__fadeInDown"},"资源管理",-1)])),_:1,__:[9]})]),_:1}),e(d,{gutter:20,class:"mt-4"},{default:t(()=>[(c(!0),x(S,null,F(l.statistics,(a,U)=>(c(),v(h,{span:6,key:a.title},{default:t(()=>[e(q,{class:A(["stat-card animate__animated animate__fadeInUp",`animate__delay-${U+1}s`]),"body-style":{padding:"20px"}},{default:t(()=>[u("div",pe,[e(i,{size:40,class:A(a.iconClass)},{default:t(()=>[(c(),v(ue(a.icon)))]),_:2},1032,["class"]),u("div",fe,[u("div",ge,y(a.value),1),u("div",ve,y(a.title),1)])])]),_:2},1032,["class"])]),_:2},1024))),128))]),_:1}),e(d,{gutter:20,class:"mt-4"},{default:t(()=>[e(h,{span:24},{default:t(()=>[e(q,{class:"resource-card animate__animated animate__fadeIn"},{header:t(()=>[u("div",ye,[u("div",be,[n[10]||(n[10]=u("span",{class:"header-title"},"资源列表",-1)),e(L,{modelValue:l.searchQuery,"onUpdate:modelValue":n[0]||(n[0]=a=>l.searchQuery=a),placeholder:"搜索资源...",class:"search-input animate__animated animate__fadeIn",clearable:""},{prefix:t(()=>[e(i,null,{default:t(()=>[e(D)]),_:1})]),_:1},8,["modelValue"])]),u("div",he,[e(w,{modelValue:l.filterType,"onUpdate:modelValue":n[1]||(n[1]=a=>l.filterType=a),placeholder:"资源类型",clearable:"",class:"filter-select animate__animated animate__fadeIn"},{default:t(()=>[(c(!0),x(S,null,F(l.resourceTypes,a=>(c(),v(m,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e(g,{type:"primary",onClick:l.handleAdd,class:"add-btn animate__animated animate__pulse animate__infinite"},{default:t(()=>[e(i,null,{default:t(()=>[e(R)]),_:1}),n[11]||(n[11]=f(" 添加资源 "))]),_:1,__:[11]},8,["onClick"])])])]),default:t(()=>[de((c(),v(z,{data:l.filteredResources,style:{width:"100%"},class:"resource-table animate__animated animate__fadeIn"},{default:t(()=>[e(p,{prop:"name",label:"资源名称","min-width":"120"},{default:t(a=>[u("div",we,[e(i,null,{default:t(()=>[e(M)]),_:1}),u("span",null,y(a.row.name),1)])]),_:1}),e(p,{prop:"type",label:"资源类型","min-width":"120"},{default:t(a=>[e(Q,{type:l.getTypeTagType(a.row.type)},{default:t(()=>[f(y(a.row.type),1)]),_:2},1032,["type"])]),_:1}),e(p,{prop:"quantity",label:"数量","min-width":"100"},{default:t(a=>[e(s,{percentage:l.getQuantityPercentage(a.row.quantity),status:l.getQuantityStatus(a.row.quantity)},null,8,["percentage","status"])]),_:1}),e(p,{prop:"location",label:"存放位置","min-width":"120"},{default:t(a=>[u("div",Ve,[e(i,null,{default:t(()=>[e(r)]),_:1}),u("span",null,y(a.row.location),1)])]),_:1}),e(p,{prop:"status",label:"状态","min-width":"100"},{default:t(a=>[e(Q,{type:l.getStatusTagType(a.row.status)},{default:t(()=>[f(y(a.row.status),1)]),_:2},1032,["type"])]),_:1}),e(p,{label:"操作",width:"200",fixed:"right"},{default:t(a=>[e(g,{size:"small",type:"primary",link:"",onClick:U=>l.handleEdit(a.row)},{default:t(()=>[e(i,null,{default:t(()=>[e(V)]),_:1}),n[12]||(n[12]=f(" 编辑 "))]),_:2,__:[12]},1032,["onClick"]),e(g,{size:"small",type:"danger",link:"",onClick:U=>l.handleDelete(a.row)},{default:t(()=>[e(i,null,{default:t(()=>[e(N)]),_:1}),n[13]||(n[13]=f(" 删除 "))]),_:2,__:[13]},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[W,l.loading]])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(O,{modelValue:l.dialogVisible,"onUpdate:modelValue":n[8]||(n[8]=a=>l.dialogVisible=a),title:l.dialogType==="add"?"添加资源":"编辑资源",width:"50%",class:"resource-dialog animate__animated animate__zoomIn"},{footer:t(()=>[u("span",Ce,[e(g,{onClick:n[7]||(n[7]=a=>l.dialogVisible=!1)},{default:t(()=>n[14]||(n[14]=[f("取消")])),_:1,__:[14]}),e(g,{type:"primary",onClick:l.handleSubmit},{default:t(()=>n[15]||(n[15]=[f("确定")])),_:1,__:[15]},8,["onClick"])])]),default:t(()=>[e(J,{ref:"formRef",model:l.resourceForm,rules:l.rules,"label-width":"100px"},{default:t(()=>[e(C,{label:"资源名称",prop:"name"},{default:t(()=>[e(L,{modelValue:l.resourceForm.name,"onUpdate:modelValue":n[2]||(n[2]=a=>l.resourceForm.name=a),placeholder:"请输入资源名称"},null,8,["modelValue"])]),_:1}),e(C,{label:"资源类型",prop:"type"},{default:t(()=>[e(w,{modelValue:l.resourceForm.type,"onUpdate:modelValue":n[3]||(n[3]=a=>l.resourceForm.type=a),placeholder:"请选择资源类型"},{default:t(()=>[(c(!0),x(S,null,F(l.resourceTypes,a=>(c(),v(m,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(C,{label:"数量",prop:"quantity"},{default:t(()=>[e(j,{modelValue:l.resourceForm.quantity,"onUpdate:modelValue":n[4]||(n[4]=a=>l.resourceForm.quantity=a),min:0,max:1e3,step:1},null,8,["modelValue"])]),_:1}),e(C,{label:"存放位置",prop:"location"},{default:t(()=>[e(w,{modelValue:l.resourceForm.location,"onUpdate:modelValue":n[5]||(n[5]=a=>l.resourceForm.location=a),placeholder:"请选择存放位置"},{default:t(()=>[(c(!0),x(S,null,F(l.locations,a=>(c(),v(m,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(C,{label:"状态",prop:"status"},{default:t(()=>[e(w,{modelValue:l.resourceForm.status,"onUpdate:modelValue":n[6]||(n[6]=a=>l.resourceForm.status=a),placeholder:"请选择状态"},{default:t(()=>[e(m,{label:"可用",value:"可用"}),e(m,{label:"维护中",value:"维护中"}),e(m,{label:"已用完",value:"已用完"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])])}const qe=X(_e,[["render",xe],["__scopeId","data-v-dd4e589b"]]);export{qe as default};
